
<% layout('layout') -%>

<div class="max-w-5xl mx-auto px-4 py-8">
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-3xl font-semibold text-gray-800">
      <%= currentFolder ? `Folder: ${currentFolder.name}` : 'My SkyVault' %>
    </h1>

    <div class="space-x-3">
      <a href="<%= currentFolder ? `/folders/${currentFolder.id}/create-folder` : '/create-folder' %>" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm">
        ➕ New Folder
      </a>
      <a href="<%= currentFolder ? `/upload/${currentFolder.id}` : '/upload' %>" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm">
        ⬆️ Upload File
      </a>
    </div>
  </div>

  <!-- Folders Section -->
  <div>
    <h2 class="text-xl font-medium text-gray-700 mb-3">📁 Folders</h2>
    <% if (folders.length > 0) { %>
      <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 mb-8">
        <% folders.forEach(folder => { %>
          <a href="/folders/<%= folder.id %>" class="block p-4 bg-yellow-100 rounded-lg hover:bg-yellow-200 transition">
            <div class="text-2xl">📁</div>
            <div class="mt-2 font-medium text-gray-800"><%= folder.name %></div>
          </a>
        <% }) %>
      </div>
    <% } else { %>
      <p class="text-gray-500 mb-8">No folders found.</p>
    <% } %>
  </div>

  <!-- Files Section -->
  <div>
    <h2 class="text-xl font-medium text-gray-700 mb-3">📄 Files</h2>
    <% if (files.length > 0) { %>
      <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
        <% files.forEach(file => { %>
          <a href="<%= file.url %>" download class="block p-4 bg-gray-100 rounded-lg hover:bg-gray-200 transition">
            <div class="text-2xl">📄</div>
            <div class="mt-2 font-medium text-gray-800 truncate"><%= file.name %></div>
            <div class="text-sm text-gray-500"><%= (file.size / 1024).toFixed(1) %> KB</div>
          </a>
        <% }) %>
      </div>
    <% } else { %>
      <p class="text-gray-500">No files uploaded yet.</p>
    <% } %>
  </div>
</div>
