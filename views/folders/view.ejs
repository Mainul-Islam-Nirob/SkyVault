<% layout('layout') %>

<div class="max-w-7xl mx-auto px-6 py-8 bg-midnightNavy rounded-xl shadow-glowCyan">
<div class="flex justify-center mb-8 gap-6">
  <a href="<%= currentFolder ? `/folders/${currentFolder.id}/new-folder` : '/folders/create' %>" 
     class="bg-neonTeal text-midnightNavy px-6 py-2 rounded-xl font-semibold shadow hover:bg-moonlightGray transition">
    ğŸ“ New Folder
  </a>
  <a href="<%= currentFolder ? `/folders/${currentFolder.id}/upload` : '/upload' %>" 
     class="bg-electricCyan text-midnightNavy px-6 py-2 rounded-xl font-semibold shadow hover:bg-softLavender transition">
    â¬†ï¸ Upload File
  </a>
</div>

<!-- Folder Title (Below the Buttons) -->
<h1 class="text-4xl font-extrabold mb-6 text-neonTeal flex items-center justify-center gap-3">
  <span>ğŸ—‚ï¸</span>
  <span><%= currentFolder ? currentFolder.name : "Root" %></span>
</h1>

  <% if (subfolders.length > 0) { %>
    <h2 class="text-2xl font-bold mb-4 text-white flex items-center gap-2">
      <span>ğŸ“‚</span> <!-- Another folder emoji -->
      Folders
    </h2>
    <ul class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 mb-8">
      <% subfolders.forEach(folder => { %>
        <li class="bg-darkSlate p-5 rounded-xl shadow-md hover:shadow-lg transition">
          <a href="/folders/<%= folder.id %>" class="block text-neonTeal font-semibold text-lg truncate hover:text-electricCyan">
            ğŸ—ƒï¸ <%= folder.name %>  <!-- Unique emoji -->
          </a>
          <!-- Folder actions -->
          <div class="flex gap-3 mt-4 text-sm justify-end">
            <a href="/folders/<%= folder.id %>/share" title="Share" class="text-yellow-400 hover:text-yellow-300" aria-label="Share folder">
              ğŸ”—
            </a>
            <a href="/folders/<%= folder.id %>/rename" title="Rename" class="text-accent hover:text-neonTeal" aria-label="Rename folder">
              âœï¸
            </a>
            <form action="/folders/<%= folder.id %>/delete" method="POST" onsubmit="return confirm('Are you sure?');" aria-label="Delete folder">
              <button type="submit" class="text-red-500 hover:text-red-700">
                ğŸ—‘ï¸
              </button>
            </form>
          </div>
        </li>
      <% }) %>
    </ul>
  <% } else { %>
    <p class="text-moonlightGray mb-8 italic">No folders here.</p>
  <% } %>

  <% if (files.length > 0) { %>
    <h2 class="text-2xl font-bold mb-4 text-white flex items-center gap-2">
      <span>ğŸ“ƒ</span> <!-- Unique file emoji -->
      Files
    </h2>
    <ul class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6">
      <% files.forEach(file => { %>
        <li class="bg-darkSlate p-5 rounded-xl shadow-md hover:shadow-lg transition relative">
          <p class="font-semibold text-neonTeal truncate"><%= file.name %></p>
          <p class="text-moonlightGray text-sm mb-3"><%= Math.round(file.size / 1024) %> KB</p>

          <div class="flex justify-between items-center">
            <a href="<%= file.url %>" target="_blank" class="text-electricCyan text-sm hover:underline" aria-label="View file">
              ğŸ” View
            </a>
            <form action="/files/<%= file.id %>/delete" method="POST" onsubmit="return confirm('Are you sure you want to delete this file?');" aria-label="Delete file">
              <button type="submit" class="text-red-500 hover:text-red-700 text-lg">
                ğŸ—‘ï¸
              </button>
            </form>
          </div>
        </li>
      <% }) %>
    </ul>
  <% } else { %>
    <p class="text-moonlightGray italic">No files here.</p>
  <% } %>
</div>
